OpenVPN UI â€“ Web Manager for OpenVPN Clients

A simple, secure web interface to manage OpenVPN clients, built on top of an existing Easy-RSA setup.
It allows you to create, list, download and revoke OpenVPN client certificates without SSH access.

This project does not replace OpenVPN or Easy-RSA â€” it orchestrates them safely.

â¸»

âœ¨ Features
	â€¢	ğŸ” HTTP Basic Auth (env-based credentials)
	â€¢	ğŸ‘¤ Create OpenVPN clients via Easy-RSA
	â€¢	ğŸ“„ Download .ovpn files (no filesystem paths exposed)
	â€¢	ğŸ“‹ List existing client profiles
	â€¢	âŒ Revoke client certificates
	â€¢	ğŸ§¹ Remove test certificates safely
	â€¢	ğŸ” Works behind NGINX reverse proxy
	â€¢	ğŸ³ Docker-based deployment
	â€¢	ğŸš« No OpenVPN private paths exposed in UI

â¸»

ğŸ§± Architecture
[ Browser ]
    |
    | HTTPS
    v
[ NGINX Reverse Proxy ]
    |
    | HTTP (internal)
    v
[ ovpn-ui (Node.js / Express) ]
    |
    | exec bash scripts
    v
[ Easy-RSA + OpenVPN PKI ]

ğŸ“ Project Structure

ovpn-ui/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â”œâ”€â”€ server.js
â””â”€â”€ README.md

Server (outside container)

âš ï¸ Paths must be adjusted to your server user
```
/home/<USER>/
â”œâ”€â”€ openvpn-ca/                     # Easy-RSA + PKI
â”‚   â””â”€â”€ pki/
â”œâ”€â”€ openvpn-clients/                # Generated .ovpn files
â”œâ”€â”€ ovpn-novo-cliente.sh            # Original working script
â””â”€â”€ ovpn-novo-cliente.container.sh  # Container-compatible wrapper
```
âœ… Server Requirements

Operating System
	â€¢	Linux (Debian / Ubuntu recommended)

Required Software
	â€¢	Docker
	â€¢	OpenVPN (already configured)
	â€¢	Easy-RSA (already initialized)
	â€¢	NGINX (recommended for HTTPS)
	â€¢	Certbot (optional, for Letâ€™s Encrypt)

â¸»

ğŸ” OpenVPN Prerequisites (MANDATORY)

Before installing ovpn-ui, the server must already be working:
	â€¢	Easy-RSA initialized
	â€¢	CA created
	â€¢	PKI functional
	â€¢	Client generation script works manually

Mandatory test (outside Docker):
```
cd /home/<USER>/openvpn-ca
/home/<USER>/ovpn-novo-cliente.container.sh test_manual
```
ğŸ³ Docker Image Build

docker build -t ovpn-ui:latest .

â–¶ï¸ Running the Container
```
docker run -d --name ovpn-ui \
  --restart unless-stopped \
  -p 127.0.0.1:9001:9001 \
  -e UI_USER=admin \
  -e UI_PASS='STRONG_PASSWORD_HERE' \
  -e PORT=9001 \
  -e OVPN_SCRIPT=/home/<USER>/ovpn-novo-cliente.container.sh \
  -e OVPN_OUTDIR=/home/<USER>/openvpn-clients \
  -v /home/<USER>/ovpn-novo-cliente.container.sh:/home/<USER>/ovpn-novo-cliente.container.sh:ro \
  -v /home/<USER>/openvpn-clients:/home/<USER>/openvpn-clients \
  -v /home/<USER>/openvpn-ca:/home/<USER>/openvpn-ca \
  -w /home/<USER>/openvpn-ca \
  ovpn-ui:latest
```
ğŸŒ Web Routes

GET /health

response:
{ "ok": true }

# UI (Protected)

GET /
	â€¢	Client creation form
	â€¢	Client list
	â€¢	Download & revoke actions

# Create Client

POST /create
Form field:
	â€¢	username (3â€“32 chars, [a-z0-9_-])

# List Clients

GET /clients
Returns all .ovpn files from OVPN_OUTDIR.

# Download Client

GET /download?file=<filename>.ovpn


âœ… File path is never exposed
âŒ Absolute paths like /home/&lt;USER&gt;/... are hidden


# Revoke Client

POST /revoke
	â€¢	Revokes certificate via Easy-RSA
	â€¢	Removes .ovpn file
	â€¢	Updates CRL

ğŸ§¹ Removing Test Certificates

## List existing certs
```
ls /home/<USER>/openvpn-ca/pki/issued
```
## Remove a test client
```
cd /home/<USER>/openvpn-ca

./easyrsa revoke test_user
./easyrsa gen-crl

rm -f pki/issued/test_user.crt
rm -f pki/private/test_user.key
rm -f pki/reqs/test_user.req
rm -f /home/<USER>/openvpn-clients/test_user*.ovpn
```
Restart OpenVPN if required.

ğŸ”’ Security Notes
	â€¢	Runs only on 127.0.0.1
	â€¢	Must be exposed via NGINX HTTPS
	â€¢	Uses sudo -n (no interactive shell)
	â€¢	UI credentials stored only via environment variables
	â€¢	No filesystem paths shown to users

ğŸ” NGINX Reverse Proxy Example
```
location /vpn/ {
    proxy_pass http://127.0.0.1:9001/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```
ğŸš€ Recommended Usage
	â€¢	Small teams
	â€¢	MSP / Industrial environments
	â€¢	Remote access control
	â€¢	VPN client lifecycle management

â¸»

âš ï¸ Disclaimer

This project does not secure OpenVPN by itself.
It assumes OpenVPN and Easy-RSA are already secure and maintained.

â¸»

ğŸ“œ License

MIT License â€“ use at your own risk.